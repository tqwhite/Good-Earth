<%
qtools.validateProperties({
	targetObject:this,
	propList:[
		{name:'displayParameters'},
		{name:'viewHelper'},
		{name:'formData'}
	],
 source:'session.dashboard.dashboardMain' });

qtools.validateProperties({
	targetObject:this.displayParameters,
	propList:[
		{name:'saveButton'},
		{name:'cancelButton'},
		{name:'schoolSelect'},
		{name:'gradeLevelSelect'}
	],
 source:'session.dashboard.dashboardMain' });

qtools.validateProperties({
	targetObject:this.formData,
	propList:[
		{name:'account'},
		{name:'student'},
		{name:'gradeLevel'},
		{name:'school'},
		{name:'schools'}
	],
 source:'session.dashboard.dashboardMain' });

 var lastName=this.formData.student.lastName?this.formData.student.lastName:this.formData.account.familyName;

var schoolString=this.viewHelper.makeSelectTag({
		divId:this.displayParameters.schoolSelect.divId,
		selectedValue:this.formData.student.schoolRefId,
		selectVarName:'schoolRefId',
		sourceObj:this.formData.schools.sort(qtools.byObjectProperty('name')),
		valuePropertyName:'refId',
		labelPropertyName:'name',
		firstItemLabel:'Select School',
		firstItemValue:'',
		selectClassName:'schoolIdClassString' //this is for debug purposes only, see register.initDomObjects()

	});

if (this.formData.gradeLevel && this.formData.gradeLevel.refId){

//I don't think this ever gets called. Remove it at the earliest convenience.

var gradeLevelSelectString=this.viewHelper.makeSelectTag({
	selectedValue:this.formData.gradeLevel.refId,
	selectVarName:'gradeLevelRefId',
	sourceObj:this.formData.school.gradeLevels.sort(qtools.byObjectProperty('seqNum')),
	valuePropertyName:'refId',
	labelPropertyName:'title',
	firstItemLabel:'Select Grade Level',
	firstItemValue:''
});
}
else{
gradeLevelSelectString='- - - - - - - - ';

}
%>

<div style='font-size:8pt;'>
<input type='hidden' name='accountRefId' value='<%=this.formData.account.refId%>'>
<input type='hidden' name='refId' value='<%=this.formData.student.refId%>'>
<input prompt='First Name' name='firstName' style='font-size:8pt;width:60px;' value='<%=this.formData.student.firstName%>'>
<input prompt='Last Name' name='lastName' style='font-size:8pt;width:60px;' value='<%=lastName%>'>
<%==schoolString%>
<span id='<%=this.displayParameters.gradeLevelSelect.divId%>'><%==gradeLevelSelectString%></span>
<span class='smallButton' style='margin-left:10px;' id='<%=this.displayParameters.saveButton.divId%>'></span>
<span title='Cancel' class='smallButton' style='margin-left:10px;' id='<%=this.displayParameters.cancelButton.divId%>'></span>
</div>